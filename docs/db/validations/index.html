
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for Aqueduct, a Dart server-side framework.">
      
      
      
      
        <link rel="shortcut icon" href="../../assets/images/favicon.png">
      
      <meta name="generator" content="mkdocs-0.16.1, mkdocs-material-1.1.1">
    
    
      
        <title>Validations - Aqueduct</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-56ade86843.js"></script>
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-4ebe3f1d68.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../style/css/override.css">
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../.." title="Aqueduct" class="md-icon md-icon--home md-header-nav__button">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Database/ORM
                </span>
              
            
            Validations
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source">
          
            


  


  <a href="https://github.com/stablekernel/aqueduct" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-icon md-icon--home md-nav__button"></i>
    
    Aqueduct
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/stablekernel/aqueduct" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Tutorial
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Tutorial
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../tut/getting-started/" title="1. Getting Started" class="md-nav__link">
      1. Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tut/writing-tests/" title="2. Writing Tests" class="md-nav__link">
      2. Writing Tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tut/executing-queries/" title="3. Executing Database Queries" class="md-nav__link">
      3. Executing Database Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tut/model-relationships-and-joins/" title="4. Advanced Database Queries" class="md-nav__link">
      4. Advanced Database Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../tut/deploying-and-other-fun-things/" title="5. Deploying" class="md-nav__link">
      5. Deploying
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      HTTP
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        HTTP
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/structure/" title="Application Structure" class="md-nav__link">
      Application Structure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/request_and_response/" title="Request and Response Objects" class="md-nav__link">
      Request and Response Objects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/request_controller/" title="Handling Requests: Fundamentals" class="md-nav__link">
      Handling Requests: Fundamentals
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/routing/" title="Routing" class="md-nav__link">
      Routing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/request_sink/" title="Initialization and the RequestSink" class="md-nav__link">
      Initialization and the RequestSink
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/http_controller/" title="Handling Requests: HTTPController" class="md-nav__link">
      Handling Requests: HTTPController
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/configure/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/serving_files/" title="Serving Files and Caching" class="md-nav__link">
      Serving Files and Caching
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../http/websockets/" title="Websockets" class="md-nav__link">
      Websockets
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Database/ORM
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Database/ORM
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../modeling_data/" title="Modeling Data" class="md-nav__link">
      Modeling Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../serialization/" title="Storage, Serialization and Deserialization" class="md-nav__link">
      Storage, Serialization and Deserialization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../executing_queries/" title="Executing Queries" class="md-nav__link">
      Executing Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../advanced_queries/" title="Advanced Queries" class="md-nav__link">
      Advanced Queries
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Validations
      </label>
    
    <a href="./" title="Validations" class="md-nav__link md-nav__link--active">
      Validations
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#built-in-validators" title="Built-in Validators" class="md-nav__link">
    Built-in Validators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-validators" title="Custom Validators" class="md-nav__link">
    Custom Validators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validation-behavior" title="Validation Behavior" class="md-nav__link">
    Validation Behavior
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-validator-behavior" title="Other Validator Behavior" class="md-nav__link">
    Other Validator Behavior
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skipping-validations" title="Skipping Validations" class="md-nav__link">
    Skipping Validations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update-and-insert-callbacks" title="Update and Insert Callbacks" class="md-nav__link">
    Update and Insert Callbacks
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../db_tools/" title="Migration and Tooling" class="md-nav__link">
      Migration and Tooling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../inside_the_db/" title="Inside the DB" class="md-nav__link">
      Inside the DB
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      OAuth 2.0
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        OAuth 2.0
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/server/" title="Setting up Authorization" class="md-nav__link">
      Setting up Authorization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/authorizer/" title="Protected Routes" class="md-nav__link">
      Protected Routes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/controllers/" title="Issuing Access Tokens" class="md-nav__link">
      Issuing Access Tokens
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/cli/" title="Creating OAuth 2.0 Clients" class="md-nav__link">
      Creating OAuth 2.0 Clients
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth/what_is_oauth/" title="What is OAuth 2.0?" class="md-nav__link">
      What is OAuth 2.0?
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Testing
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Testing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../testing/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../testing/harness/" title="Test Harness" class="md-nav__link">
      Test Harness
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../testing/test_client/" title="Writing Tests and the TestClient" class="md-nav__link">
      Writing Tests and the TestClient
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Deployment
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Deployment
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/deploy_local/" title="Deploy Locally" class="md-nav__link">
      Deploy Locally
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/deploy_heroku/" title="Deploy on Heroku" class="md-nav__link">
      Deploy on Heroku
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/deploy_aws/" title="Deploy on AWS" class="md-nav__link">
      Deploy on AWS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../deploy/script/" title="Deploying without aqueduct serve" class="md-nav__link">
      Deploying without aqueduct serve
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#built-in-validators" title="Built-in Validators" class="md-nav__link">
    Built-in Validators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-validators" title="Custom Validators" class="md-nav__link">
    Custom Validators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validation-behavior" title="Validation Behavior" class="md-nav__link">
    Validation Behavior
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#other-validator-behavior" title="Other Validator Behavior" class="md-nav__link">
    Other Validator Behavior
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skipping-validations" title="Skipping Validations" class="md-nav__link">
    Skipping Validations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#update-and-insert-callbacks" title="Update and Insert Callbacks" class="md-nav__link">
    Update and Insert Callbacks
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
               
                 <a href="https://github.com/stablekernel/aqueduct/edit/master/docs/db/validations.md" title="Edit this page" class="md-icon md-content__edit">edit</a>
               
              
                
                <h1 id="validating-data">Validating Data</h1>
<p>Data is added to a database through <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Query/update.html">update</a> and <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedSet/insert.html">insert</a> queries. As part of these two operations, a <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedObject-class.html">ManagedObject&lt;T&gt;</a> will ensure that its properties have valid values. For example, a <code>Person</code> object might ensure that its name starts with a capital letter and that its phone number has only numeric values.  If one or more validation fails, the update or insert operation will fail and the data is not sent to the database. A validation failure will throw a <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/QueryException-class.html">QueryException</a>, which automatically sends an HTTP response with error messaging to help the client correct their request.</p>
<p>The preferred way of setting a validation is to add <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate-class.html">Validate</a> metadata to properties of a persistent type of a <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedObject-class.html">ManagedObject&lt;T&gt;</a>. Here's an example of a validation that ensures a tweet is less than 140 characters:</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Tweet</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Tweet</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Tweet</span> <span class="p">{}</span>
<span class="kd">class</span> <span class="nc">_Tweet</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">managedPrimaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="err">@</span><span class="n">Validate</span><span class="p">.</span><span class="n">length</span><span class="p">(</span><span class="nl">lessThan:</span> <span class="m">140</span><span class="p">)</span>
  <span class="kt">String</span> <span class="n">message</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<h3 id="built-in-validators">Built-in Validators</h3>
<p>There are a handful of built-in validations for common operations. For example, it is common to apply a regular expression to a value to ensure it formatted correctly or restrict the possible values to a list of available options. Common validators are available as named constructors on the <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate-class.html">Validate</a> class. Here is an example:</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">_Story</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">managedPrimaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="err">@</span><span class="n">Validate</span><span class="p">.</span><span class="n">oneOf</span><span class="p">(</span><span class="kd">const</span> <span class="p">[</span><span class="s2">&quot;started&quot;</span><span class="p">,</span> <span class="s2">&quot;accepted&quot;</span><span class="p">,</span> <span class="s2">&quot;rejected&quot;</span><span class="p">,</span> <span class="s2">&quot;delivered&quot;</span><span class="p">])</span>
  <span class="kt">String</span> <span class="n">state</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>A built-in validator is useful because it automatically generates an error message that is returned in an HTTP response. For example, the previous code snippet indicates that the <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/AuthCodeController/state.html">state</a> property must be one of the four listed strings. If a value other than one of those four strings is used, the error message returned to the HTTP client would be:</p>
<div class="codehilite"><pre><span></span>&quot;The value `invalidValue` is not valid for <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/AuthCodeController/state.html&quot;</span><span class="nt">&gt;</span>state<span class="nt">&lt;/a&gt;</span>. Valid values are: &#39;started&#39;, &#39;accepted&#39;, &#39;rejected&#39;, &#39;delivered&#39;.&quot;.
</pre></div>


<p>See the API reference for <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate-class.html">Validate</a> and its named constructors for possible options.</p>
<p><a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate-class.html">Validate</a> metadata on transient properties have no effect. This metadata is only valid for database-backed properties declared in a persistent type.</p>
<h3 id="custom-validators">Custom Validators</h3>
<p>There will be times where the built-in validators are not sufficient for your application's use case. You may create subclasses of <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate-class.html">Validate</a> to provide custom validation behavior.For example, a <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate-class.html">Validate</a> subclass you have declared named <code>ValidatePhoneNumber</code> would be used like so:</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">_Person</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">managedPrimaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="err">@</span><span class="n">ValidatePhoneNumber</span><span class="p">()</span>
  <span class="kt">String</span> <span class="n">phoneNumber</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>A subclass of <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate-class.html">Validate</a> must override <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate/validate.html">Validate.validate()</a> and call the superclass' primary constructor when instantiated. Here's an example of that phone number validator:</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">ValidatePhoneNumber</span> <span class="kd">extends</span> <span class="n">Validate</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="n">ValidatePhoneNumber</span><span class="p">({</span><span class="kt">bool</span> <span class="nl">onUpdate:</span> <span class="kc">true</span><span class="p">,</span> <span class="kt">bool</span> <span class="nl">onInsert:</span> <span class="kc">true</span><span class="p">})</span> <span class="o">:</span>
    <span class="k">super</span><span class="p">(</span><span class="nl">onUpdate:</span> <span class="n">onUpdate</span><span class="p">,</span> <span class="nl">onInsert:</span> <span class="n">onInsert</span><span class="p">);</span>

  <span class="err">@</span><span class="n">override</span>
  <span class="kt">bool</span> <span class="n">validate</span><span class="p">(</span>
      <span class="n">ValidateOperation</span> <span class="n">operation</span><span class="p">,</span>
      <span class="n">ManagedAttributeDescription</span> <span class="n">property</span><span class="p">,</span>
      <span class="kt">String</span> <span class="n">value</span><span class="p">,</span>
      <span class="n">List</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="n">errors</span><span class="p">)</span> <span class="p">{</span>  
    <span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="n">length</span> <span class="o">!=</span> <span class="m">15</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">errors</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">${</span><span class="n">property</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> has invalid length of </span><span class="si">${</span><span class="n">value</span><span class="p">.</span><span class="n">length</span><span class="si">}</span><span class="s2">, must be 15 digits.&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">containsNonNumericValues</span><span class="p">(</span><span class="n">value</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">errors</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">${</span><span class="n">property</span><span class="p">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> has invalid format, must contain characters 0-9 only.&quot;</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Note that <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate-class.html">Validate</a> is generic - you may provide a type argument which must match the type of the <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Level/value.html">value</a> argument to <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate/validate.html">Validate.validate()</a>. Omitting the type argument defaults to <code>dynamic</code> and therefore <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Level/value.html">value</a> must be <code>dynamic</code>.</p>
<p>The <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ConfigurationItem/validate.html">validate</a> method must return <code>false</code> if validation failed, otherwise it should return <code>true</code>. It should add error messages for any failed validations. These error messages are returned in the HTTP response.</p>
<h3 id="validation-behavior">Validation Behavior</h3>
<p>A property may have more than one <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate-class.html">Validate</a> metadata. In this case, all of the validations for a property must pass. The order in which multiple validations are performed is undefined and subject to change. Here's an example of validations that ensure a property's value is 10 characters long and only contains 10 alphabetic capital letters:</p>
<div class="codehilite"><pre><span></span><span class="err">@</span><span class="n">Validate</span><span class="p">.</span><span class="n">length</span><span class="p">(</span><span class="nl">equalTo:</span> <span class="m">10</span><span class="p">)</span>
<span class="err">@</span><span class="n">Validate</span><span class="p">.</span><span class="n">matches</span><span class="p">(</span><span class="s2">r&quot;$[A-Z]+^&quot;</span><span class="p">)</span>
<span class="kt">String</span> <span class="n">tenCapitalLetters</span><span class="p">;</span>
</pre></div>


<p>By default, validations are executed when a <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Query-class.html">Query&lt;T&gt;</a>'s <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedSet/insert.html">insert</a> or <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Query/update.html">update</a> method is invoked. A validator can be restricted to only run on <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedSet/insert.html">insert</a> or <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Query/update.html">update</a> by passing values for its optional constructor arguments <code>onUpdate</code> and <code>onInsert</code>:</p>
<div class="codehilite"><pre><span></span><span class="err">@</span><span class="n">Validate</span><span class="p">.</span><span class="n">matches</span><span class="p">(</span><span class="s2">r&quot;^[A-Z]+$&quot;</span><span class="p">,</span> <span class="nl">onInsert:</span> <span class="kc">true</span><span class="p">,</span> <span class="nl">onUpdate:</span> <span class="kc">false</span><span class="p">)</span>
<span class="kt">String</span> <span class="n">validateOnInsertOnly</span><span class="p">;</span>
</pre></div>


<p>It is important to understand how validations work when a value for a property is <em>not</em> specified in an insert or update query. For example, consider a <code>Person</code> with a <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/APIContact/name.html">name</a> and <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/APIContact/email.html">email</a> property and then inserted in a query that omits <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/APIContact/email.html">email</a>:</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Query</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="p">()</span>
  <span class="p">..</span><span class="n">values</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Bob&quot;</span><span class="p">;</span>

<span class="kd">await</span> <span class="n">query</span><span class="p">.</span><span class="n">insert</span><span class="p">();</span>
</pre></div>


<p>Because <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/APIContact/email.html">email</a> was not set on <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Query/values.html">Query.values</a>, validations will not be run on that property.</p>
<p>There are two special validators that can require a property to be set, or require that a property <em>not</em> be set. <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate/Validate.present.html">Validate.present()</a> requires that the associated property must have a value. A property with this validator must be provided each time the object is inserted or updated. Like all validators, <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate/Validate.present.html">Validate.present()</a> can be adjusted to be invoked on only inserts or only updates. For example, the following declaration requires that <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/APIContact/email.html">email</a> is set on insertion, but doesn't have to be for updates:</p>
<div class="codehilite"><pre><span></span><span class="err">@</span><span class="n">Validate</span><span class="p">.</span><span class="n">present</span><span class="p">(</span><span class="nl">onUpdate:</span> <span class="kc">false</span><span class="p">,</span> <span class="nl">onInsert:</span> <span class="kc">true</span><span class="p">)</span>
<span class="kt">String</span> <span class="n">email</span><span class="p">;</span>
</pre></div>


<p>The inverse of <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate/Validate.present.html">Validate.present()</a> is <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate/Validate.absent.html">Validate.absent()</a>. This validation prevents a property from being set. This is useful when a value should be included during insertion, but can't be updated. Here's an example:</p>
<div class="codehilite"><pre><span></span><span class="err">@</span><span class="n">Validate</span><span class="p">.</span><span class="n">absent</span><span class="p">(</span><span class="nl">onUpdate:</span> <span class="kc">true</span><span class="p">,</span> <span class="nl">onInsert:</span> <span class="kc">false</span><span class="p">)</span>
<span class="kt">String</span> <span class="n">canOnlyBeSetOnce</span><span class="p">;</span>
</pre></div>


<p>In the above declaration, the validator is only run on update operations and ensures that the property <code>canOnlyBeSetOnce</code> does not have a value. Because this validator is not run on insert operations, there is no restriction when the object is first inserted.</p>
<p>Validators are not run when a value is null. For example, the following insertion explicitly inserts <code>null</code> for the property <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/APIContact/email.html">email</a>:</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Query</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="p">()</span>
  <span class="p">..</span><span class="n">values</span><span class="p">.</span><span class="n">email</span> <span class="o">=</span> <span class="kc">null</span>
  <span class="p">..</span><span class="n">values</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Bob&quot;</span><span class="p">;</span>

<span class="kd">await</span> <span class="n">query</span><span class="p">.</span><span class="n">insert</span><span class="p">();</span>
</pre></div>


<p>Nullability is enforced by <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedColumnAttributes/isNullable.html">ManagedColumnAttributes.isNullable</a> property. Consider the following declaration:</p>
<div class="codehilite"><pre><span></span><span class="err">@</span><span class="n">ManagedColumnAttributes</span><span class="p">(</span><span class="nl">nullable:</span> <span class="kc">false</span><span class="p">)</span>
<span class="err">@</span><span class="n">Validate</span><span class="p">.</span><span class="n">length</span><span class="p">(</span><span class="nl">greaterThan:</span> <span class="m">10</span><span class="p">)</span>
<span class="kt">String</span> <span class="n">name</span><span class="p">;</span>
</pre></div>


<p>Here, the property <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/APIContact/name.html">name</a> must not be null and must be greater than 10 characters long. The behavior of inserting or updating this property is shown in the following table.</p>
<table>
<thead>
<tr>
<th>Input Value for Name</th>
<th>Validation Runs?</th>
<th>Outcome</th>
</tr>
</thead>
<tbody>
<tr>
<td>Insert value longer than 10 characters</td>
<td>Yes</td>
<td>Successful database insert</td>
</tr>
<tr>
<td>Insert value shorter than 10 characters</td>
<td>Yes</td>
<td>Database insert not executed, exception thrown</td>
</tr>
<tr>
<td>Insert value not specified</td>
<td>No</td>
<td>Database insert fails with non-null violation, exception thrown</td>
</tr>
<tr>
<td>Insert value is null</td>
<td>No</td>
<td>Database insert fails with non-null violation, exception thrown</td>
</tr>
<tr>
<td>Update value longer than 10 characters</td>
<td>Yes</td>
<td>Successful database update</td>
</tr>
<tr>
<td>Update value shorter than 10 characters</td>
<td>Yes</td>
<td>Database update not executed, exception thrown</td>
</tr>
<tr>
<td>Update value not specified</td>
<td>No</td>
<td>Successful database update</td>
</tr>
<tr>
<td>Update value is explicit null</td>
<td>No</td>
<td>Successful database update</td>
</tr>
</tbody>
</table>
<p>This behavior allows <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedObject-class.html">ManagedObject&lt;T&gt;</a> instances to be partially updated, which also allows for partial PUTs. Partial PUTs can be prevented by adding <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate/Validate.present.html">Validate.present()</a> metadata to all properties. While partial PUTs are not idiomatic REST, they are pragmatic software development.</p>
<p>This also means that any custom validator can safely assume that a value passed to <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate/validate.html">Validate.validate()</a> is non-null.</p>
<h3 id="other-validator-behavior">Other Validator Behavior</h3>
<p>For validators that can't be built by subclassing <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Validate-class.html">Validate</a>, you may override <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedObject/validate.html">ManagedObject&lt;T&gt;.validate()</a>. This method is useful when a validation involves more than one property.</p>
<p>This method is passed the type of operation triggering the validation - either an insert or update. Here's an example:</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Person</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Person</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Person</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">override</span>
  <span class="kt">bool</span> <span class="n">validate</span><span class="p">(</span>
      <span class="p">{</span><span class="n">ValidateOperation</span> <span class="nl">forOperation:</span> <span class="n">ValidateOperation</span><span class="p">.</span><span class="n">insert</span><span class="p">,</span>
      <span class="n">List</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">&gt;</span> <span class="n">collectErrorsIn</span><span class="p">})</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="n">valid</span> <span class="o">=</span> <span class="k">super</span><span class="p">(</span>
     <span class="nl">forOperation:</span> <span class="n">forOperation</span><span class="p">,</span> <span class="nl">collectErrorsIn:</span> <span class="n">collectErrorsIn</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">&gt;</span> <span class="m">10</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">valid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="n">collectErrorsIn</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;a + b must be greater than 10&quot;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">valid</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>When overriding this method, the <code>super</code> implementation must be invoked and if it returns <code>false</code>, the overridden method must return <code>false</code>.</p>
<h3 id="skipping-validations">Skipping Validations</h3>
<p>Validations are only run when values are set via <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Query/values.html">Query&lt;T&gt;.values</a>. Values set via <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Query/valueMap.html">Query&lt;T&gt;.valueMap</a> are not validated. Therefore, objects should typically be inserted and updated using <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Query/values.html">Query&lt;T&gt;.values</a> unless validation must be ignored. Here's an example of skipping validation:</p>
<div class="codehilite"><pre><span></span><span class="kd">var</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Query</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span><span class="p">()</span>
  <span class="p">..</span><span class="n">valueMap</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span> <span class="o">:</span> <span class="s2">&quot;xyz&quot;</span><span class="p">,</span>
    <span class="s2">&quot;email&quot;</span> <span class="o">:</span> <span class="s2">&quot;whatever&quot;</span>
  <span class="p">};</span>
</pre></div>


<p>Skipping validation should be rare.</p>
<h3 id="update-and-insert-callbacks">Update and Insert Callbacks</h3>
<p><a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedObject-class.html">ManagedObject&lt;T&gt;</a> subclasses may override <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedObject/willUpdate.html">willUpdate</a> and <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedObject/willInsert.html">willInsert</a> to modify its properties prior to being updated or inserted by a <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Query-class.html">Query&lt;T&gt;</a>. For example, a managed object may have updated and created dates that can be guaranteed to be set when inserted or updated:</p>
<div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Person</span> <span class="kd">extends</span> <span class="n">ManagedObject</span><span class="o">&lt;</span><span class="n">_Person</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">_Person</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">override</span>
  <span class="kt">void</span> <span class="n">willUpdate</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">updatedAt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">now</span><span class="p">().</span><span class="n">toUtc</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="err">@</span><span class="n">override</span>
  <span class="kt">void</span> <span class="n">willInsert</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">createdAt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">now</span><span class="p">().</span><span class="n">toUtc</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="kd">class</span> <span class="nc">_Person</span> <span class="p">{</span>
  <span class="err">@</span><span class="n">managedPrimaryKey</span>
  <span class="kt">int</span> <span class="n">id</span><span class="p">;</span>

  <span class="kt">String</span> <span class="n">name</span><span class="p">;</span>
  <span class="n">DateTime</span> <span class="n">createdAt</span><span class="p">;</span>
  <span class="n">DateTime</span> <span class="n">updatedAt</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<p>Note that all operations must be synchronous in these methods.</p>
<p>Both <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedObject/willUpdate.html">willUpdate</a> and <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedObject/willInsert.html">willInsert</a> are invoked prior the validation phase. Thus, any values set in these methods will be subject to the declared validations of the instance.</p>
<p>Like validations, <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedObject/willUpdate.html">willUpdate</a> and <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/ManagedObject/willInsert.html">willInsert</a>  are skipped when using <a href="https://www.dartdocs.org/documentation/aqueduct/latest/aqueduct/Query/valueMap.html">Query.valueMap</a>.</p>
              
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../advanced_queries/" title="Advanced Queries" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Advanced Queries
              </span>
            </div>
          </a>
        
        
          <a href="../db_tools/" title="Migration and Tooling" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Migration and Tooling
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Built by stable|kernel
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-30ac6a1727.js"></script>
      <script>app.initialize({url:{base:"../.."}})</script>
      
    
    
      
      <script>!function(e,t,a,n,o,c,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(a),i=t.getElementsByTagName(a)[0],c.async=1,c.src=n,i.parentNode.insertBefore(c,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-41269877-2","aqueduct.io"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",t,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>
      
    
  </body>
</html>