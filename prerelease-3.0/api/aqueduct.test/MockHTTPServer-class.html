<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="API docs for the MockHTTPServer class from the aqueduct.test library, for the Dart programming language.">
  <title>MockHTTPServer class - aqueduct.test library - Dart API</title>
  <!-- required because all the links are pseudo-absolute -->
  <base href="..">

  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500,400i,400,300|Source+Sans+Pro:400,300,700" rel="stylesheet">
  <link rel="stylesheet" href="static-assets/github.css">
  <link rel="stylesheet" href="static-assets/styles.css">
  <link rel="icon" href="static-assets/favicon.png">

</head>

<body>

<div id="overlay-under-drawer"></div>

<header id="title">
  <button id="sidenav-left-toggle" type="button">&nbsp;</button>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="index.html">aqueduct</a></li>
    <li><a href="aqueduct.test/aqueduct.test-library.html">aqueduct.test</a></li>
    <li class="self-crumb">MockHTTPServer class</li>
  </ol>
  <div class="self-name">MockHTTPServer</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<main>

  <div class="col-xs-6 col-sm-3 col-md-2 sidebar sidebar-offcanvas-left">
    <h5>aqueduct.test library</h5>
    <ol>
      <li class="section-title"><a href="aqueduct.test/aqueduct.test-library.html#classes">Classes</a></li>
      <li><a href="aqueduct.test/MockHTTPServer-class.html">MockHTTPServer</a></li>
      <li><a href="aqueduct.test/MockServer-class.html">MockServer</a></li>
      <li><a href="aqueduct.test/TestClient-class.html">TestClient</a></li>
      <li><a href="aqueduct.test/TestRequest-class.html">TestRequest</a></li>
      <li><a href="aqueduct.test/TestResponse-class.html">TestResponse</a></li>
      <li><a href="aqueduct.test/TestResponseBody-class.html">TestResponseBody</a></li>
    
      <li class="section-title"><a href="aqueduct.test/aqueduct.test-library.html#constants">Constants</a></li>
      <li><a href="aqueduct.test/isBoolean-constant.html">isBoolean</a></li>
      <li><a href="aqueduct.test/isDouble-constant.html">isDouble</a></li>
      <li><a href="aqueduct.test/isInteger-constant.html">isInteger</a></li>
      <li><a href="aqueduct.test/isNotPresent-constant.html">isNotPresent</a></li>
      <li><a href="aqueduct.test/isNumber-constant.html">isNumber</a></li>
      <li><a href="aqueduct.test/isString-constant.html">isString</a></li>
    
      <li class="section-title"><a href="aqueduct.test/aqueduct.test-library.html#properties">Properties</a></li>
      <li><a href="aqueduct.test/isTimestamp.html">isTimestamp</a></li>
    
      <li class="section-title"><a href="aqueduct.test/aqueduct.test-library.html#functions">Functions</a></li>
      <li><a class="deprecated" href="aqueduct.test/asDateTime.html">asDateTime</a></li>
      <li><a class="deprecated" href="aqueduct.test/asNumber.html">asNumber</a></li>
      <li><a href="aqueduct.test/expectResponse.html">expectResponse</a></li>
      <li><a href="aqueduct.test/hasBody.html">hasBody</a></li>
      <li><a href="aqueduct.test/hasHeaders.html">hasHeaders</a></li>
      <li><a href="aqueduct.test/hasResponse.html">hasResponse</a></li>
      <li><a href="aqueduct.test/hasStatus.html">hasStatus</a></li>
      <li><a href="aqueduct.test/isAfter.html">isAfter</a></li>
      <li><a href="aqueduct.test/isAfterOrSameMomentAs.html">isAfterOrSameMomentAs</a></li>
      <li><a href="aqueduct.test/isBefore.html">isBefore</a></li>
      <li><a href="aqueduct.test/isBeforeOrSameMomentAs.html">isBeforeOrSameMomentAs</a></li>
      <li><a href="aqueduct.test/isSameMomentAs.html">isSameMomentAs</a></li>
      <li><a href="aqueduct.test/partial.html">partial</a></li>
    
    
    
      <li class="section-title"><a href="aqueduct.test/aqueduct.test-library.html#exceptions">Exceptions</a></li>
      <li><a href="aqueduct.test/TestClientException-class.html">TestClientException</a></li>
    </ol>
  </div>

  <div class="col-xs-12 col-sm-9 col-md-8 main-content">
    <h1>MockHTTPServer class</h1>

    <section class="desc markdown">
      <p>This class is used as a 'mock' implementation of another HTTP server.</p>
<p>Create instances of these types during testing to simulate responses for HTTP requests your application makes to another server.
All requests your application makes to another server will be sent to this object. Your tests can then verify the
correct request was sent and your application's behavior can be validated against the possible responses from the other server.</p>
<p>An instance of this type listens on 'localhost' on <a href="aqueduct.test/MockHTTPServer/port.html">port</a>. Your application should use configuration values to provide the base URL and port
of another server. During testing, your application should use the base URL 'http://localhost:<port>' and instantiate an mock HTTP
server with that port.</port></p>
<p>By default, an instance of this type returns a 503 error response, indicating that the service can't be reached. Different
responses can be returned via <a href="aqueduct.test/MockHTTPServer/defaultResponse.html">defaultResponse</a>, <a href="aqueduct.test/MockHTTPServer/queueResponse.html">queueResponse</a>, <a href="aqueduct.test/MockHTTPServer/queueHandler.html">queueHandler</a>, and <a href="aqueduct.test/MockHTTPServer/queueOutage.html">queueOutage</a>.</p>
<p>Example usages:
        test("POST /nest/pair associates account with Nest service", () async {
          var nestMockServer = new MockHTTPServer(7777);
          await nestMockServer.open();</p>
<pre class="language-dart"><code>      // Expect that POST /nest/pair sends an HTTP request to Nest server.
      var response = await client.request("/nest/pair", ...).post();
      expect(response, ...);

      // Verify the path of the HTTP request sent to Nest server.
      var requestSentToNest = await nestMockServer.next();
      expect(requestSentToNest.path.segments[1, response["id"]);

      await nestMockServer.close();
    });
</code></pre>
    </section>
    
    <section>
      <dl class="dl-horizontal">
        <dt>Inheritance</dt>
        <dd><ul class="gt-separated dark clazz-relationships">
          <li>Object</li>
          <li><a href="aqueduct.test/MockServer-class.html">MockServer</a><span class="signature">&lt;<a href="aqueduct/Request-class.html">Request</a>&gt;</span></li>
          <li>MockHTTPServer</li>
        </ul></dd>




      </dl>
    </section>

    <section class="summary offset-anchor" id="constructors">
      <h2>Constructors</h2>

      <dl class="constructor-summary-list">
        <dt id="MockHTTPServer" class="callable">
          <span class="name"><a href="aqueduct.test/MockHTTPServer/MockHTTPServer.html">MockHTTPServer</a></span><span class="signature">(<span class="parameter" id="-param-port"><span class="type-annotation">int</span> <span class="parameter-name">port</span></span>)</span>
        </dt>
        <dd>
          
        </dd>
      </dl>
    </section>

    <section class="summary offset-anchor" id="instance-properties">
      <h2>Properties</h2>

      <dl class="properties">
        <dt id="defaultDelay" class="property">
          <span class="name"><a href="aqueduct.test/MockHTTPServer/defaultDelay.html">defaultDelay</a></span>
          <span class="signature">&#8596; Duration</span>
        </dt>
        <dd>
          The delay to be used for responses where a delay is not set <a href="aqueduct.test/MockHTTPServer/defaultDelay.html">[...]</a>
          <div class="features">read / write</div>
</dd>
        <dt id="defaultResponse" class="property">
          <span class="name"><a href="aqueduct.test/MockHTTPServer/defaultResponse.html">defaultResponse</a></span>
          <span class="signature">&#8596; <a href="aqueduct/Response-class.html">Response</a></span>
        </dt>
        <dd>
          The response to be returned if there are no queued responses <a href="aqueduct.test/MockHTTPServer/defaultResponse.html">[...]</a>
          <div class="features">read / write</div>
</dd>
        <dt id="port" class="property">
          <span class="name"><a href="aqueduct.test/MockHTTPServer/port.html">port</a></span>
          <span class="signature">&#8596; int</span>
        </dt>
        <dd>
          The port to listen on.
          <div class="features">read / write</div>
</dd>
        <dt id="queuedResponseCount" class="property">
          <span class="name"><a href="aqueduct.test/MockHTTPServer/queuedResponseCount.html">queuedResponseCount</a></span>
          <span class="signature">&#8594; int</span>
        </dt>
        <dd>
          The number of currently queued responses
          <div class="features">read-only</div>
</dd>
        <dt id="server" class="property">
          <span class="name"><a href="aqueduct.test/MockHTTPServer/server.html">server</a></span>
          <span class="signature">&#8596; HttpServer</span>
        </dt>
        <dd>
          The underlying <code>HttpServer</code> listening for requests.
          <div class="features">read / write</div>
</dd>
        <dt id="hashCode" class="property inherited">
          <span class="name"><a href="aqueduct.test/MockServer/hashCode.html">hashCode</a></span>
          <span class="signature">&#8594; int</span>
        </dt>
        <dd class="inherited">
          The hash code for this object. <a href="aqueduct.test/MockServer/hashCode.html">[...]</a>
          <div class="features">read-only, inherited</div>
</dd>
        <dt id="isEmpty" class="property inherited">
          <span class="name"><a href="aqueduct.test/MockServer/isEmpty.html">isEmpty</a></span>
          <span class="signature">&#8594; bool</span>
        </dt>
        <dd class="inherited">
          Whether or not there are any messages that have been sent to this instance but have yet to be read.
          <div class="features">read-only, inherited</div>
</dd>
        <dt id="runtimeType" class="property inherited">
          <span class="name"><a href="aqueduct.test/MockServer/runtimeType.html">runtimeType</a></span>
          <span class="signature">&#8594; Type</span>
        </dt>
        <dd class="inherited">
          A representation of the runtime type of the object.
          <div class="features">read-only, inherited</div>
</dd>
      </dl>
    </section>

    <section class="summary offset-anchor" id="instance-methods">
      <h2>Methods</h2>
      <dl class="callables">
        <dt id="close" class="callable">
          <span class="name"><a href="aqueduct.test/MockHTTPServer/close.html">close</a></span><span class="signature">(<wbr>)
            <span class="returntype parameter">&#8594; Future</span>
          </span>
        </dt>
        <dd>
          Shuts down the server listening for HTTP requests.
          
</dd>
        <dt id="open" class="callable">
          <span class="name"><a href="aqueduct.test/MockHTTPServer/open.html">open</a></span><span class="signature">(<wbr>)
            <span class="returntype parameter">&#8594; Future</span>
          </span>
        </dt>
        <dd>
          Begins listening for HTTP requests on <a href="aqueduct.test/MockHTTPServer/port.html">port</a>.
          
</dd>
        <dt id="queueHandler" class="callable">
          <span class="name"><a href="aqueduct.test/MockHTTPServer/queueHandler.html">queueHandler</a></span><span class="signature">(<wbr><span class="parameter" id="queueHandler-param-handler"><span class="type-annotation"><a href="aqueduct/Response-class.html">Response</a></span> <span class="parameter-name">handler</span>(<span class="parameter" id="handler-param-request"><span class="type-annotation"><a href="aqueduct/Request-class.html">Request</a></span> <span class="parameter-name">request</span></span>), {</span> <span class="parameter" id="queueHandler-param-delay"><span class="type-annotation">Duration</span> <span class="parameter-name">delay</span></span> })
            <span class="returntype parameter">&#8594; void</span>
          </span>
        </dt>
        <dd>
          Enqueues a function that creates a response for the next request. <a href="aqueduct.test/MockHTTPServer/queueHandler.html">[...]</a>
          
</dd>
        <dt id="queueOutage" class="callable">
          <span class="name"><a href="aqueduct.test/MockHTTPServer/queueOutage.html">queueOutage</a></span><span class="signature">(<wbr>{<span class="parameter" id="queueOutage-param-count"><span class="type-annotation">int</span> <span class="parameter-name">count</span>: <span class="default-value">1</span></span> })
            <span class="returntype parameter">&#8594; void</span>
          </span>
        </dt>
        <dd>
          Enqueues an outage; the next request will not receive a response. <a href="aqueduct.test/MockHTTPServer/queueOutage.html">[...]</a>
          
</dd>
        <dt id="queueResponse" class="callable">
          <span class="name"><a href="aqueduct.test/MockHTTPServer/queueResponse.html">queueResponse</a></span><span class="signature">(<wbr><span class="parameter" id="queueResponse-param-resp"><span class="type-annotation"><a href="aqueduct/Response-class.html">Response</a></span> <span class="parameter-name">resp</span>, {</span> <span class="parameter" id="queueResponse-param-delay"><span class="type-annotation">Duration</span> <span class="parameter-name">delay</span></span> })
            <span class="returntype parameter">&#8594; void</span>
          </span>
        </dt>
        <dd>
          Enqueues a response for the next request. <a href="aqueduct.test/MockHTTPServer/queueResponse.html">[...]</a>
          
</dd>
        <dt id="add" class="callable inherited">
          <span class="name"><a href="aqueduct.test/MockServer/add.html">add</a></span><span class="signature">(<wbr><span class="parameter" id="add-param-value"><span class="type-annotation"><a href="aqueduct/Request-class.html">Request</a></span> <span class="parameter-name">value</span></span>)
            <span class="returntype parameter">&#8594; void</span>
          </span>
        </dt>
        <dd class="inherited">
          Adds an event to this server.
          <div class="features">inherited</div>
</dd>
        <dt id="clear" class="callable inherited">
          <span class="name"><a href="aqueduct.test/MockServer/clear.html">clear</a></span><span class="signature">(<wbr>)
            <span class="returntype parameter">&#8594; void</span>
          </span>
        </dt>
        <dd class="inherited">
          
          <div class="features">inherited</div>
</dd>
        <dt id="next" class="callable inherited">
          <span class="name"><a href="aqueduct.test/MockServer/next.html">next</a></span><span class="signature">(<wbr>)
            <span class="returntype parameter">&#8594; Future<span class="signature">&lt;<a href="aqueduct/Request-class.html">Request</a>&gt;</span></span>
          </span>
        </dt>
        <dd class="inherited">
          Returns an event that has been added to this server. <a href="aqueduct.test/MockServer/next.html">[...]</a>
          <div class="features">inherited</div>
</dd>
        <dt id="noSuchMethod" class="callable inherited">
          <span class="name"><a href="aqueduct.test/MockServer/noSuchMethod.html">noSuchMethod</a></span><span class="signature">(<wbr><span class="parameter" id="noSuchMethod-param-invocation"><span class="type-annotation">Invocation</span> <span class="parameter-name">invocation</span></span>)
            <span class="returntype parameter">&#8594; dynamic</span>
          </span>
        </dt>
        <dd class="inherited">
          Invoked when a non-existent method or property is accessed. <a href="aqueduct.test/MockServer/noSuchMethod.html">[...]</a>
          <div class="features">inherited</div>
</dd>
        <dt id="toString" class="callable inherited">
          <span class="name"><a href="aqueduct.test/MockServer/toString.html">toString</a></span><span class="signature">(<wbr>)
            <span class="returntype parameter">&#8594; String</span>
          </span>
        </dt>
        <dd class="inherited">
          Returns a string representation of this object.
          <div class="features">inherited</div>
</dd>
      </dl>
    </section>

    <section class="summary offset-anchor inherited" id="operators">
      <h2>Operators</h2>
      <dl class="callables">
        <dt id="operator ==" class="callable inherited">
          <span class="name"><a href="aqueduct.test/MockServer/operator_equals.html">operator ==</a></span><span class="signature">(<wbr><span class="parameter" id="==-param-other"><span class="parameter-name">other</span></span>)
            <span class="returntype parameter">&#8594; bool</span>
          </span>
        </dt>
        <dd class="inherited">
          The equality operator. <a href="aqueduct.test/MockServer/operator_equals.html">[...]</a>
          <div class="features">inherited</div>
</dd>
      </dl>
    </section>




  </div> <!-- /.main-content -->

  <div class="col-xs-6 col-sm-6 col-md-2 sidebar sidebar-offcanvas-right">
    <ol>
      <li class="section-title"><a href="aqueduct.test/MockHTTPServer-class.html#constructors">Constructors</a></li>
      <li><a href="aqueduct.test/MockHTTPServer/MockHTTPServer.html">MockHTTPServer</a></li>
    
      <li class="section-title">
        <a href="aqueduct.test/MockHTTPServer-class.html#instance-properties">Properties</a>
      </li>
      <li><a href="aqueduct.test/MockHTTPServer/defaultDelay.html">defaultDelay</a></li>
      <li><a href="aqueduct.test/MockHTTPServer/defaultResponse.html">defaultResponse</a></li>
      <li><a href="aqueduct.test/MockHTTPServer/port.html">port</a></li>
      <li><a href="aqueduct.test/MockHTTPServer/queuedResponseCount.html">queuedResponseCount</a></li>
      <li><a href="aqueduct.test/MockHTTPServer/server.html">server</a></li>
      <li class="inherited"><a href="aqueduct.test/MockServer/hashCode.html">hashCode</a></li>
      <li class="inherited"><a href="aqueduct.test/MockServer/isEmpty.html">isEmpty</a></li>
      <li class="inherited"><a href="aqueduct.test/MockServer/runtimeType.html">runtimeType</a></li>
    
      <li class="section-title"><a href="aqueduct.test/MockHTTPServer-class.html#instance-methods">Methods</a></li>
      <li><a href="aqueduct.test/MockHTTPServer/close.html">close</a></li>
      <li><a href="aqueduct.test/MockHTTPServer/open.html">open</a></li>
      <li><a href="aqueduct.test/MockHTTPServer/queueHandler.html">queueHandler</a></li>
      <li><a href="aqueduct.test/MockHTTPServer/queueOutage.html">queueOutage</a></li>
      <li><a href="aqueduct.test/MockHTTPServer/queueResponse.html">queueResponse</a></li>
      <li class="inherited"><a href="aqueduct.test/MockServer/add.html">add</a></li>
      <li class="inherited"><a href="aqueduct.test/MockServer/clear.html">clear</a></li>
      <li class="inherited"><a href="aqueduct.test/MockServer/next.html">next</a></li>
      <li class="inherited"><a href="aqueduct.test/MockServer/noSuchMethod.html">noSuchMethod</a></li>
      <li class="inherited"><a href="aqueduct.test/MockServer/toString.html">toString</a></li>
    
      <li class="section-title inherited"><a href="aqueduct.test/MockHTTPServer-class.html#operators">Operators</a></li>
      <li class="inherited"><a href="aqueduct.test/MockServer/operator_equals.html">operator ==</a></li>
    
    
    
    </ol>
  </div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    aqueduct 3.0.0
  </span>

</footer>

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="static-assets/typeahead.bundle.min.js"></script>
<script src="static-assets/highlight.pack.js"></script>
<script src="static-assets/URI.js"></script>
<script src="static-assets/script.js"></script>


</body>

</html>
